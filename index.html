<html>
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">

    <link href="https://fonts.googleapis.com/css?family=EB+Garamond" rel="stylesheet">
    <link href="treestyle.css" rel="stylesheet" />

    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/swipe.min.js"></script>
    <script type="text/javascript" src="js/player.js"></script>
    <script type="text/javascript">

        var playButton;
        var swipe;
        var player;

        $(document).ready(init);

        function init() {
            // setup jQuery refs
            playButton = $('#playpause');

            // setup player
            var startTime = 0;
            var skipTime = 10; // seconds to skip forward/back using buttons
            player = new Player(startTime, skipTime);
            playButton.click( () => { player.playPause(); });
            $('#rew').click( () => { player.rew(); });
            $('#ffw').click( () => { player.ffw(); });

            // setup swipe
            var swipeElement = $('#slider');
            swipe = new Swipe(swipeElement[0], {
                speed: 700, // of transition (ms)
                continuous: false, // ie. don't cycle back round
                disableScroll: false
            });
            swipe.setup();

            // report seek time
            window.setInterval( () => {
                console.log("Play position: " + player.narration.currentTime);
            }, 10000);
        }

        // for 'continue' button - swipe to next page and preload
        function nextAndLoad() {
            player.preload(); // trigger preloading on iOS
            swipe.next();
        }

        function getFileName(affix) {
          const dir = "audio/"; // directory/URI
          const prefix = "cue-"; // prefix if cue (ie. if passed a number)
          const postfix = ".mp3"; // format
          if (typeof affix === 'number') { // if passed a number, it's a cue
            if (affix < 10) affix = '0' + affix; // 0-padding
            return dir + prefix + affix + postfix;
          } else { // if passed text, that's the name of the main narration file
            return dir + affix + postfix;
          }
        }

    </script>
</head>

<body>
<img src="imgs/title-large.png" class="title" alt="Trees Are Fags" />
<div class="timeline"><canvas id="timeline" width="600" height="250"></canvas></div>

<div id="slider" class="swipe">
    <div class="swipe-wrap">

        <!-- ................page 1...........-->
        <div class="page">
            <div class="text-body">
                <p>

                    This is a guided encounter with a tree, so it is best that you listen in the company of trees. You
                    will be led through a series of observations, reflections and movements in relation to trees. The
                    encounter lasts just over 20 minutes. So find a spot among trees, turn off the ringer of your
                    device, and when you are ready, swipe to the next screen to begin <em>Trees Are Fags</em>

                </p>
                <p align="right">
                    <a onclick="nextAndLoad()" href="#">Continue &gt;</a>
                </p>
            </div>
        </div>

        <!-- ................page 2...........-->
        <div class="page">
            <div class="controls">
                <div class="controlButton" id="rew"></div>
                <div class="controlButton play" id="playpause"></div>
                <div class="controlButton" id="ffw"></div>
            </div>
        </div>

        <!-- ................page 3...........-->
        <div class="page">
            <div class="text-body">
                <p>

                    <em>Trees are Fags</em> is an encounter created in 2018 by Benny Nemerofsky Ramsay, programmed and
                    sound designed by Nikita Gaidakov. The piece features the voices of Matt Carter, Oskar Kirk Hansen,
                    Bastien Pourtout, Edward Twaddle, Alberta Whittle and Virginia Woolf. Fragments from Sofia
                    Gubaidulina's <em>Sonata for Two Bassoons</em> (1977) was performed by Ronan Whittern. <em>Trees are
                    Fags</em> was commissioned by Lux and co-produced by the <em>Cruising the Seventies</em> research
                    team at the Edinburgh College of Art. For more information on Benny Nemerofsky Ramsay, visit <a
                    href="http://www.nemerofsky.ca">www.nemerofsky.ca</a>.

                </p>
                <p align="center"><img src="imgs/logos.png" width="150" /></p>
            </div>
        </div>
    </div>
</div>
</body>
</html>
